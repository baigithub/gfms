import{a as n}from"./index-D5GkNzM3.js";import{u as o,E as r}from"./index-D4Rku7DI.js";const s=n.create({baseURL:"/api",timeout:3e4});s.interceptors.request.use(e=>{const t=o();return t.token&&(e.headers.Authorization=`Bearer ${t.token}`),e},e=>Promise.reject(e));s.interceptors.response.use(e=>e.data,e=>{if(e.response){const{status:t,data:i}=e.response;t===401?e.config.url.includes("/auth/login")||(r.error("登录已过期，请重新登录"),o().logout(),window.location.href="/login"):t===403?(r.error("登录已失效，请重新登录"),o().logout(),window.location.href="/login"):t===404?r.error("请求的资源不存在"):t===500?r.error("服务器错误"):e.config.url.includes("/auth/login")||r.error(i.detail||"请求失败")}else r.error("网络错误");return Promise.reject(e)});export{s as r};
