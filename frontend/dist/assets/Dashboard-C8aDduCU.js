import{_ as Y,u as Z,s as q,M as G,o as u,c as v,b as e,w as n,T as H,a as t,F as S,y as F,N as K,j as tt,m,t as i,e as l,p,r as w,d as st,O as T,P as et,Q as $,z as I,R as B,S as at,i as nt,I as ot,U as lt,V as k,W as it,X as dt,Y as rt,Z as ct,J as ut}from"./index-D4Rku7DI.js";import{g as _t}from"./green_finance-C_pmG5wr.js";import{g as vt}from"./announcement-f7FshZh8.js";import"./index-VufPjWZz.js";import"./index-D5GkNzM3.js";import"./request-BnFmk4vl.js";const mt={class:"dashboard"},ft=["src"],pt={class:"banner-content"},ht={class:"banner-title"},gt={class:"banner-summary"},bt={class:"banner-dots"},wt=["onClick"],yt={class:"banner-navigation"},kt={class:"banner-progress"},Ct={class:"welcome-section"},zt={class:"welcome-content"},Nt={class:"welcome-title"},xt={class:"welcome-stats"},Vt={class:"mini-stat"},At={class:"mini-stat"},Dt={class:"welcome-actions"},St={class:"stats-cards"},Ft={class:"stat-content"},Tt={class:"stat-icon-wrapper"},$t={class:"stat-icon"},It={class:"stat-info"},Bt={class:"stat-value"},Mt={class:"stat-metrics"},Rt={class:"metric-item"},Ut={class:"metric-value"},Lt={class:"metric-item"},Pt={class:"stat-content"},jt={class:"stat-icon-wrapper investment"},Et={class:"stat-icon"},Jt={class:"stat-info"},Ot={class:"stat-value"},Qt={class:"stat-trend up"},Wt={class:"stat-content"},Xt={class:"stat-icon-wrapper leasing"},Yt={class:"stat-icon"},Zt={class:"stat-info"},qt={class:"stat-value"},Gt={class:"stat-trend up"},Ht={class:"stat-content"},Kt={class:"stat-icon-wrapper wealth"},ts={class:"stat-icon"},ss={class:"stat-info"},es={class:"stat-value"},as={class:"stat-trend up"},ns={class:"stat-content"},os={class:"stat-icon-wrapper underwriting"},ls={class:"stat-icon"},is={class:"stat-info"},ds={class:"stat-value"},rs={class:"stat-trend up"},cs={class:"card-header"},us={class:"header-left"},_s={class:"header-icon-wrapper"},vs={class:"header-text"},ms={class:"card-subtitle"},fs={key:0,class:"empty-state"},ps={key:1,class:"todo-list"},hs=["onClick"],gs={class:"todo-left"},bs={class:"todo-icon"},ws={class:"todo-content"},ys={class:"todo-title"},ks={class:"todo-count"},Cs={__name:"Dashboard",setup(zs){const M=st(),R=Z(),C=p(!1),d=p({green_loan_balance:0,customer_count:0,green_loan_ratio:0,growth_rate:0,green_investment:0,green_leasing:0,green_wealth_management:0,green_underwriting:0}),h=p([]),c=p([]),r=p(0);let g=null;const z=p(!1),N=ut(()=>c.value[r.value]||{}),b=a=>{if(a==null||a==="")return"0.00ä¸‡äº¿å…ƒ";const s=typeof a=="string"?parseFloat(a):Number(a);return isNaN(s)?"0.00ä¸‡äº¿å…ƒ":`${(s/1e4).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})}ä¸‡äº¿å…ƒ`},U=a=>{if(a==null||a==="")return"0äº¿";const s=typeof a=="string"?parseFloat(a):Number(a);return isNaN(s)?"0äº¿":`${(s/1e8).toFixed(2)}äº¿`},L=a=>a>=10?"danger":a>=5?"warning":"success",V=async()=>{try{C.value=!0;const a=await _t();d.value=a.stats,h.value=a.todos||[]}catch(a){console.error("Failed to load dashboard:",a)}finally{C.value=!1}},P=()=>{V()},A=a=>{M.push("/green-identify/pending")},j=async()=>{try{const a=await vt();c.value=Array.isArray(a)?a:[],c.value.length>0&&E()}catch(a){console.error("åŠ è½½å…¬å‘Šå¤±è´¥:",a)}},E=()=>{g&&clearInterval(g),g=setInterval(()=>{z.value||(r.value=(r.value+1)%c.value.length)},3e3)},J=()=>{r.value=(r.value+1)%c.value.length},O=()=>{r.value=(r.value-1+c.value.length)%c.value.length},Q=a=>{r.value=a};return q(()=>{V(),j()}),G(()=>{g&&clearInterval(g)}),(a,s)=>{var D;const o=w("el-icon"),x=w("el-button"),f=w("el-card"),W=w("el-empty"),X=w("el-tag");return u(),v("div",mt,[c.value.length>0?(u(),v("div",{key:0,class:"announcement-banner",onMouseenter:s[0]||(s[0]=_=>z.value=!0),onMouseleave:s[1]||(s[1]=_=>z.value=!1)},[e(H,{name:"slide-fade"},{default:n(()=>[(u(),v("div",{class:"banner-item",key:r.value},[t("img",{src:N.value.cover_image,class:"banner-image",alt:"å…¬å‘Šå°é¢"},null,8,ft),t("div",pt,[s[3]||(s[3]=t("div",{class:"banner-tag"},"ç³»ç»Ÿå…¬å‘Š",-1)),t("h3",ht,i(N.value.title),1),t("p",gt,i(N.value.summary),1)])]))]),_:1}),t("div",bt,[(u(!0),v(S,null,F(c.value,(_,y)=>(u(),v("span",{key:y,class:T(["dot",{active:y===r.value}]),onClick:Ns=>Q(y)},null,10,wt))),128))]),t("div",yt,[t("button",{class:"nav-btn prev",onClick:O},[e(o,null,{default:n(()=>[e(l(et))]),_:1})]),t("button",{class:"nav-btn next",onClick:J},[e(o,null,{default:n(()=>[e(l($))]),_:1})])]),t("div",kt,[t("div",{class:"progress-bar",style:K({width:(r.value+1)/c.value.length*100+"%"})},null,4)])],32)):tt("",!0),t("div",Ct,[t("div",zt,[t("h1",Nt,[s[4]||(s[4]=t("span",{class:"greeting"},"æ—©ä¸Šå¥½",-1)),m(" "+i((D=l(R).user)==null?void 0:D.real_name)+" ğŸ‘‹ ",1)]),s[5]||(s[5]=t("p",{class:"welcome-subtitle"},"ç»¿è‰²é‡‘èç®¡ç†ç³»ç»Ÿ Â· æ™ºèƒ½æ•°æ®çœ‹æ¿",-1)),t("div",xt,[t("div",Vt,[e(o,null,{default:n(()=>[e(l(I))]),_:1}),t("span",null,i(h.value.length)+" é¡¹å¾…åŠ",1)]),t("div",At,[e(o,null,{default:n(()=>[e(l(B))]),_:1}),t("span",null,i(U(d.value.green_loan_balance)),1)])])]),t("div",Dt,[e(x,{type:"primary",onClick:P,loading:C.value,class:"refresh-btn"},{default:n(()=>[e(o,{class:"btn-icon"},{default:n(()=>[e(l(at))]),_:1}),s[6]||(s[6]=m(" åˆ·æ–°æ•°æ® ",-1))]),_:1},8,["loading"])])]),t("div",St,[e(f,{shadow:"hover",class:"stat-card main-card"},{default:n(()=>[t("div",Ft,[t("div",Tt,[t("div",$t,[e(o,{size:40},{default:n(()=>[e(l(B))]),_:1})])]),t("div",It,[s[10]||(s[10]=t("div",{class:"stat-label"},"ç»¿è‰²è´·æ¬¾ä½™é¢",-1)),t("div",Bt,i(b(d.value.green_loan_balance)),1),t("div",Mt,[t("div",Rt,[s[7]||(s[7]=t("span",{class:"metric-label"},"å®¢æˆ·æ•°",-1)),t("span",Ut,i(d.value.customer_count),1)]),s[9]||(s[9]=t("div",{class:"metric-divider"},null,-1)),t("div",Lt,[s[8]||(s[8]=t("span",{class:"metric-label"},"å¢é•¿ç‡",-1)),t("span",{class:T(["metric-value",{negative:d.value.growth_rate<0,positive:d.value.growth_rate>=0}])},[e(o,{size:12},{default:n(()=>[(u(),nt(ot(d.value.growth_rate>=0?"ArrowUp":"ArrowDown")))]),_:1}),m(" "+i(Math.abs(d.value.growth_rate))+"% ",1)],2)])])])])]),_:1}),e(f,{shadow:"hover",class:"stat-card"},{default:n(()=>[t("div",Pt,[t("div",jt,[t("div",Et,[e(o,{size:32},{default:n(()=>[e(l(lt))]),_:1})])]),t("div",Jt,[s[12]||(s[12]=t("div",{class:"stat-label"},"ç»¿è‰²æŠ•èµ„",-1)),t("div",Ot,i(b(d.value.green_investment)),1),t("div",Qt,[e(o,null,{default:n(()=>[e(l(k))]),_:1}),s[11]||(s[11]=m(" æŒç»­å¢é•¿ ",-1))])])])]),_:1}),e(f,{shadow:"hover",class:"stat-card"},{default:n(()=>[t("div",Wt,[t("div",Xt,[t("div",Yt,[e(o,{size:32},{default:n(()=>[e(l(it))]),_:1})])]),t("div",Zt,[s[14]||(s[14]=t("div",{class:"stat-label"},"ç»¿è‰²ç§Ÿèµ",-1)),t("div",qt,i(b(d.value.green_leasing)),1),t("div",Gt,[e(o,null,{default:n(()=>[e(l(k))]),_:1}),s[13]||(s[13]=m(" ç¨³å¥å‘å±• ",-1))])])])]),_:1}),e(f,{shadow:"hover",class:"stat-card"},{default:n(()=>[t("div",Ht,[t("div",Kt,[t("div",ts,[e(o,{size:32},{default:n(()=>[e(l(dt))]),_:1})])]),t("div",ss,[s[16]||(s[16]=t("div",{class:"stat-label"},"ç»¿è‰²ç†è´¢",-1)),t("div",es,i(b(d.value.green_wealth_management)),1),t("div",as,[e(o,null,{default:n(()=>[e(l(k))]),_:1}),s[15]||(s[15]=m(" å¿«é€Ÿå¢é•¿ ",-1))])])])]),_:1}),e(f,{shadow:"hover",class:"stat-card"},{default:n(()=>[t("div",ns,[t("div",os,[t("div",ls,[e(o,{size:32},{default:n(()=>[e(l(I))]),_:1})])]),t("div",is,[s[18]||(s[18]=t("div",{class:"stat-label"},"ç»¿è‰²æ‰¿é”€",-1)),t("div",ds,i(b(d.value.green_underwriting)),1),t("div",rs,[e(o,null,{default:n(()=>[e(l(k))]),_:1}),s[17]||(s[17]=m(" æŒç»­å‘åŠ› ",-1))])])])]),_:1})]),e(f,{shadow:"hover",class:"todo-card"},{header:n(()=>[t("div",cs,[t("div",us,[t("div",_s,[e(o,{class:"header-icon"},{default:n(()=>[e(l(ct))]),_:1})]),t("div",vs,[s[19]||(s[19]=t("span",{class:"card-title"},"å¾…åŠäº‹é¡¹",-1)),t("span",ms,"æ‚¨æœ‰ "+i(h.value.length)+" é¡¹å¾…å¤„ç†ä»»åŠ¡",1)])]),e(x,{text:"",type:"primary",onClick:s[2]||(s[2]=_=>A("all")),class:"view-all-btn"},{default:n(()=>[s[20]||(s[20]=m(" æŸ¥çœ‹å…¨éƒ¨ ",-1)),e(o,null,{default:n(()=>[e(l($))]),_:1})]),_:1})])]),default:n(()=>[h.value.length===0?(u(),v("div",fs,[e(W,{description:"æš‚æ— å¾…åŠäº‹é¡¹","image-size":120},{description:n(()=>[...s[21]||(s[21]=[t("p",{class:"empty-text"},"å¤ªæ£’äº†ï¼æ‰€æœ‰ä»»åŠ¡å·²å®Œæˆ",-1)])]),_:1})])):(u(),v("div",ps,[(u(!0),v(S,null,F(h.value,_=>(u(),v("div",{key:_.category,class:"todo-item",onClick:y=>A(_.category)},[t("div",gs,[t("div",bs,[e(o,null,{default:n(()=>[e(l(rt))]),_:1})]),t("div",ws,[t("div",ys,i(_.category),1),s[22]||(s[22]=t("div",{class:"todo-desc"},"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…å¹¶å¤„ç†",-1))])]),t("div",ks,[e(X,{type:L(_.count),size:"large",effect:"dark",class:"count-tag"},{default:n(()=>[m(i(_.count),1)]),_:2},1032,["type"])])],8,hs))),128))]))]),_:1})])}}},Ts=Y(Cs,[["__scopeId","data-v-32d6065a"]]);export{Ts as default};
