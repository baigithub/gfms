import{a}from"./index-D5GkNzM3.js";import{u as i,E as o}from"./index-DDrUN6p6.js";const t=a.create({baseURL:"/api",timeout:3e4});t.interceptors.request.use(e=>{const n=i();return n.token&&(e.headers.Authorization=`Bearer ${n.token}`),e},e=>Promise.reject(e));t.interceptors.response.use(e=>e.data,e=>{const n=i();if(e.response){const{status:r,data:s}=e.response;r===401?(n.logout(),window.location.href="/login",o.error("登录已过期，请重新登录")):r===403?o.error("没有权限访问"):r===404?o.error("请求的资源不存在"):r===500?o.error("服务器错误"):o.error((s==null?void 0:s.detail)||"请求失败")}else e.code==="ECONNABORTED"?o.error("请求超时"):o.error("网络错误");return Promise.reject(e)});function c(e){return t.post("/workflow/definitions",e)}function l(e){return t.get("/workflow/definitions",{params:e})}function w(e){return t.get(`/workflow/definitions/${e}`)}function d(e,n){return t.put(`/workflow/definitions/${e}`,n)}function k(e){return t.delete(`/workflow/definitions/${e}`)}function p(e){return t.post(`/workflow/definitions/${e}/activate`)}function g(e){return t.post(`/workflow/definitions/${e}/deactivate`)}function $(e,n){return t.post(`/workflow/definitions/${e}/nodes`,n)}function h(e){return t.get("/workflow/instances",{params:e})}function m(e){return t.get(`/workflow/instances/${e}/tasks`)}function D(e){return t.delete(`/workflow/instances/${e}`)}function I(e){return t.get("/workflow-instances",{params:e})}function v(e){return t.delete(`/workflow-instances/${e}`)}export{c as a,l as b,$ as c,g as d,p as e,k as f,w as g,I as h,h as i,m as j,v as k,D as l,t as r,d as u};
